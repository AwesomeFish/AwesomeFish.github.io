<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Unit Lookup System</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<!-- Bootstrap -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
		<!-- Bootstrap Font Icon CSS -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
	</head>
	<style>
		.rating {
			display: inline-block;
		}

		.dot {
			font-family: monospace;
			color: #ccc;
			cursor: pointer;
			transition: color 0.2s;
		}

		.dot.filled {
			color: black;
		}

		.bi{
			font-size: 24px;
		}

        .scrollable-menu {
            height: auto;
            max-height: 200px;
            overflow-x: hidden;
        }
		
	</style>
	<body>
		<div id="app" class="container">
			<h1 class="text-center">Chronicles of Darkness Character Sheet</h1>
			<div class="row">
				<div class="col-4">
					<div class="row mb-3">
						<label class="form-label">Name</label>
						<input type="text" class="form-control" name="name">
					</div>
					<div class="row mb-3">
						<label class="form-label">Age</label>
						<input type="number" class="form-control" name="age">
					</div>
					<div class="row mb-3">
						<label class="form-label">Player</label>
						<input type="text" class="form-control" name="player">
					</div>
				</div>
				<div class="col-4">
					<div class="row mb-3">
						<label class="form-label">Virtue</label>
						<input type="text" class="form-control" name="virtue">
					</div>
					<div class="row mb-3">
						<label class="form-label">Vice</label>
						<input type="text" class="form-control" name="vice">
					</div>
					<div class="row mb-3">
						<label class="form-label">Concept</label>
						<input type="text" class="form-control" name="concept">
					</div>
				</div>
				<div class="col-4">
					<div class="row mb-3">
						<label class="form-label">Chronicle</label>
						<input type="text" class="form-control" name="chronicle">
					</div>
					<div class="row mb-3">
						<label class="form-label">Faction</label>
						<input type="text" class="form-control" name="faction">
					</div>
					<div class="row mb-3">
						<label class="form-label">Group Name</label>
						<input type="text" class="form-control" name="group_name">
					</div>
				</div>
			</div>
			<hr>
			<h3>Attributes</h3>
			<hr>
			<div class="row">
				<div class="col-4">
					<h4>Mental</h4>
					<div class="row mb-3">
							<div class="col-4"><label class="form-label">Intelligence</label></div>
							<div class="col-8"><span v-for="n in 5" :class="['dot', n <= Intelligence ? 'filled' : '']" @click="setRating(n, 'Intelligence')"><i class="bi bi-circle-fill p-1"></i></span></div>
					</div>

					<div class="row mb-3">
							<div class="col-4"><label class="form-label">Wits</label></div>
							<div class="col-8"><span v-for="n in 5" :class="['dot', n <= Wits ? 'filled' : '']" @click="setRating(n, 'Wits')"><i class="bi bi-circle-fill p-1"></i></span></div>
					</div>

					<div class="row mb-3">
							<div class="col-4"><label class="form-label">Resolve</label></div>
							<div class="col-8"><span v-for="n in 5" :class="['dot', n <= Resolve ? 'filled' : '']" @click="setRating(n, 'Resolve')"><i class="bi bi-circle-fill p-1"></i></span></div>
					</div>

				</div>
				<div class="col-4">
					<h4>Physical</h4>

					<div class="row mb-3">
							<div class="col-4"><label class="form-label">Strength</label></div>
							<div class="col-8"><span v-for="n in 5" :class="['dot', n <= Strength ? 'filled' : '']" @click="setRating(n, 'Strength')"><i class="bi bi-circle-fill p-1"></i></span></div>
					</div>

					<div class="row mb-3">
							<div class="col-4"><label class="form-label">Dexterity</label></div>
							<div class="col-8"><span v-for="n in 5" :class="['dot', n <= Dexterity ? 'filled' : '']" @click="setRating(n, 'Dexterity')"><i class="bi bi-circle-fill p-1"></i></span></div>
					</div>

					<div class="row mb-3">
							<div class="col-4"><label class="form-label">Stamina</label></div>
							<div class="col-8"><span v-for="n in 5" :class="['dot', n <= Stamina ? 'filled' : '']" @click="setRating(n, 'Stamina')"><i class="bi bi-circle-fill p-1"></i></span></div>
					</div>

				</div>
				<div class="col-4">
					<h4>Social</h4>
					<div class="row mb-3">
							<div class="col-4"><label class="form-label">Presence</label></div>
							<div class="col-8"><span v-for="n in 5" :class="['dot', n <= Presence ? 'filled' : '']" @click="setRating(n, 'Presence')"><i class="bi bi-circle-fill p-1"></i></span></div>
					</div>

					<div class="row mb-3">
							<div class="col-4"><label class="form-label">Manipulation</label></div>
							<div class="col-8"><span v-for="n in 5" :class="['dot', n <= Manipulation ? 'filled' : '']" @click="setRating(n, 'Manipulation')"><i class="bi bi-circle-fill p-1"></i></span></div>
					</div>

					<div class="row mb-3">
							<div class="col-4"><label class="form-label">Composure</label></div>
							<div class="col-8"><span v-for="n in 5" :class="['dot', n <= Composure ? 'filled' : '']" @click="setRating(n, 'Composure')"><i class="bi bi-circle-fill p-1"></i></span></div>
					</div>
				</div>

			</div>
			<div class="row">
				<div class="col-4"><h3>Skills</h3><hr></div>
				<div class="col-8"><h3>Other Traits</h3><hr></div>
			</div>
			<div class="row">
				<div class="col-4">
					<h4>Mental <small class="text-muted">(-3 Unskilled)</small></h4>
					<div class="row mb-3">
						<div class="col-4"><label class="form-label">Academics</label></div>
						<div class="col-8">
							<span v-for="n in 5" :class="['dot', n <= Academics ? 'filled' : '']" @click="setRating(n, 'Academics')"><i class="bi bi-circle-fill p-1"></i></span>
							<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Academics')">Reset</button>
						</div>
					</div>

					<div class="row mb-3">
						<div class="col-4"><label class="form-label">Computer</label></div>
						<div class="col-8">
							<span v-for="n in 5" :class="['dot', n <= Computer ? 'filled' : '']" @click="setRating(n, 'Computer')"><i class="bi bi-circle-fill p-1"></i></span>
							<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Computer')">Reset</button>
						</div>
					</div>

					<div class="row mb-3">
						<div class="col-4"><label class="form-label">Crafts</label></div>
						<div class="col-8">
							<span v-for="n in 5" :class="['dot', n <= Crafts ? 'filled' : '']" @click="setRating(n, 'Crafts')"><i class="bi bi-circle-fill p-1"></i></span>
							<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Crafts')">Reset</button>
						</div>
					</div>

					<div class="row mb-3">
						<div class="col-4"><label class="form-label">Investigation</label></div>
						<div class="col-8">
							<span v-for="n in 5" :class="['dot', n <= Investigation ? 'filled' : '']" @click="setRating(n, 'Investigation')"><i class="bi bi-circle-fill p-1"></i></span>
							<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Investigation')">Reset</button>
						</div>
					</div>

					<div class="row mb-3">
						<div class="col-4"><label class="form-label">Medicine</label></div>
						<div class="col-8">
							<span v-for="n in 5" :class="['dot', n <= Medicine ? 'filled' : '']" @click="setRating(n, 'Medicine')"><i class="bi bi-circle-fill p-1"></i></span>
							<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Medicine')">Reset</button>
						</div>
					</div>

					<div class="row mb-3">
						<div class="col-4"><label class="form-label">Occult</label></div>
						<div class="col-8">
							<span v-for="n in 5" :class="['dot', n <= Occult ? 'filled' : '']" @click="setRating(n, 'Occult')"><i class="bi bi-circle-fill p-1"></i></span>
							<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Occult')">Reset</button>
						</div>
					</div>

					<div class="row mb-3">
						<div class="col-4"><label class="form-label">Politics</label></div>
						<div class="col-8">
							<span v-for="n in 5" :class="['dot', n <= Politics ? 'filled' : '']" @click="setRating(n, 'Politics')"><i class="bi bi-circle-fill p-1"></i></span>
							<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Politics')">Reset</button>
						</div>
					</div>

					<div class="row mb-3">
						<div class="col-4"><label class="form-label">Science</label></div>
						<div class="col-8">
							<span v-for="n in 5" :class="['dot', n <= Science ? 'filled' : '']" @click="setRating(n, 'Science')"><i class="bi bi-circle-fill p-1"></i></span>
							<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Science')">Reset</button>
						</div>
					</div>
				</div>
				<div class="col-4">
					<h4>Merits</h4>
					<app-meritdropdown></app-meritdropdown>
				</div>
				<div class="col-4">
					<div class="row mb-3">
						<h4>Health</h4>
						<div class="d-flex justify-content-evenly">
							<span v-for="n in 12" :class="['dot', n <= Stamina+Size ? 'filled' : '']" ><i class="bi bi-circle-fill p-1"></i></span>
						</div>
						<div class="d-flex justify-content-evenly">
							<span v-for="(state, index) in HealthStatus" @click="cycleState(index)">
								<i :class="mappedStates[index]"></i>
							  </span>
						</div>
						<div class="row mb-3">
							<h4>Willpower</h4>
							<div class="d-flex justify-content-evenly">
								<span v-for="n in 12" :class="['dot', n <= Resolve+Composure ? 'filled' : '']" ><i class="bi bi-circle-fill p-1"></i></span>
							</div>
							<div class="d-flex justify-content-evenly">
								<span v-for="(state, index) in WillpowerStatus" @click="WillpowerStatus[index] = !WillpowerStatus[index]">
									<i :class="state ? 'bi bi-square-fill p-1' : 'bi bi-square p-1'"></i>
								  </span>
							</div>
						</div>
					</div>
				</div>

				<div class="col-4">
					<h4>Physical <small class="text-muted">(-1 Unskilled)</small></h4>
					<div class="row mb-3">
						<div class="col-4"><label class="form-label">Athletics</label></div>
						<div class="col-8">
							<span v-for="n in 5" :class="['dot', n <= Athletics ? 'filled' : '']" @click="setRating(n, 'Athletics')"><i class="bi bi-circle-fill p-1"></i></span>
							<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Athletics')">Reset</button>
						</div>
					</div>

					<div class="row mb-3">
						<div class="col-4"><label class="form-label">Brawl</label></div>
						<div class="col-8">
							<span v-for="n in 5" :class="['dot', n <= Brawl ? 'filled' : '']" @click="setRating(n, 'Brawl')"><i class="bi bi-circle-fill p-1"></i></span>
							<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Brawl')">Reset</button>
						</div>
					</div>

					<div class="row mb-3">
						<div class="col-4"><label class="form-label">Drive</label></div>
						<div class="col-8">
							<span v-for="n in 5" :class="['dot', n <= Drive ? 'filled' : '']" @click="setRating(n, 'Drive')"><i class="bi bi-circle-fill p-1"></i></span>
							<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Drive')">Reset</button>
						</div>
					</div>

					<div class="row mb-3">
						<div class="col-4"><label class="form-label">Firearms</label></div>
						<div class="col-8">
							<span v-for="n in 5" :class="['dot', n <= Firearms ? 'filled' : '']" @click="setRating(n, 'Firearms')"><i class="bi bi-circle-fill p-1"></i></span>
							<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Firearms')">Reset</button>
						</div>
					</div>

					<div class="row mb-3">
						<div class="col-4"><label class="form-label">Larceny</label></div>
						<div class="col-8">
							<span v-for="n in 5" :class="['dot', n <= Larceny ? 'filled' : '']" @click="setRating(n, 'Larceny')"><i class="bi bi-circle-fill p-1"></i></span>
							<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Larceny')">Reset</button>
						</div>
					</div>

					<div class="row mb-3">
						<div class="col-4"><label class="form-label">Stealth</label></div>
						<div class="col-8">
							<span v-for="n in 5" :class="['dot', n <= Stealth ? 'filled' : '']" @click="setRating(n, 'Stealth')"><i class="bi bi-circle-fill p-1"></i></span>
							<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Stealth')">Reset</button>
						</div>
					</div>

					<div class="row mb-3">
						<div class="col-4"><label class="form-label">Survival</label></div>
						<div class="col-8">
							<span v-for="n in 5" :class="['dot', n <= Survival ? 'filled' : '']" @click="setRating(n, 'Survival')"><i class="bi bi-circle-fill p-1"></i></span>
							<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Survival')">Reset</button>
						</div>
					</div>

					<div class="row mb-3">
						<div class="col-4"><label class="form-label">Weaponry</label></div>
						<div class="col-8">
							<span v-for="n in 5" :class="['dot', n <= Weaponry ? 'filled' : '']" @click="setRating(n, 'Weaponry')"><i class="bi bi-circle-fill p-1"></i></span>
							<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Weaponry')">Reset</button>
						</div>
					</div>
				</div>
					<div class="col-4">
					</div>
					<div class="col-4"></div>

				<div class="row">
					<div class="col-4">
						<h4>Social <small class="text-muted">(-1 Unskilled)</small></h4>
						<div class="row mb-3">
							<div class="col-4"><label class="form-label">Animal Ken</label></div>
							<div class="col-8">
								<span v-for="n in 5" :class="['dot', n <= AnimalKen ? 'filled' : '']" @click="setRating(n, 'AnimalKen')"><i class="bi bi-circle-fill p-1"></i></span>
								<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('AnimalKen')">Reset</button>
							</div>
						</div>

						<div class="row mb-3">
							<div class="col-4"><label class="form-label">Empathy</label></div>
							<div class="col-8">
								<span v-for="n in 5" :class="['dot', n <= Empathy ? 'filled' : '']" @click="setRating(n, 'Empathy')"><i class="bi bi-circle-fill p-1"></i></span>
								<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Empathy')">Reset</button>
							</div>
						</div>

						<div class="row mb-3">
							<div class="col-4"><label class="form-label">Expression</label></div>
							<div class="col-8">
								<span v-for="n in 5" :class="['dot', n <= Expression ? 'filled' : '']" @click="setRating(n, 'Expression')"><i class="bi bi-circle-fill p-1"></i></span>
								<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Expression')">Reset</button>
							</div>
						</div>

						<div class="row mb-3">
							<div class="col-4"><label class="form-label">Intimidation</label></div>
							<div class="col-8">
								<span v-for="n in 5" :class="['dot', n <= Intimidation ? 'filled' : '']" @click="setRating(n, 'Intimidation')"><i class="bi bi-circle-fill p-1"></i></span>
								<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Intimidation')">Reset</button>
							</div>
						</div>

						<div class="row mb-3">
							<div class="col-4"><label class="form-label">Persuasion</label></div>
							<div class="col-8">
								<span v-for="n in 5" :class="['dot', n <= Persuasion ? 'filled' : '']" @click="setRating(n, 'Persuasion')"><i class="bi bi-circle-fill p-1"></i></span>
								<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Persuasion')">Reset</button>
							</div>
						</div>

						<div class="row mb-3">
							<div class="col-4"><label class="form-label">Socialize</label></div>
							<div class="col-8">
								<span v-for="n in 5" :class="['dot', n <= Socialize ? 'filled' : '']" @click="setRating(n, 'Socialize')"><i class="bi bi-circle-fill p-1"></i></span>
								<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Socialize')">Reset</button>
							</div>
						</div>

						<div class="row mb-3">
							<div class="col-4"><label class="form-label">Streetwise</label></div>
							<div class="col-8">
								<span v-for="n in 5" :class="['dot', n <= Streetwise ? 'filled' : '']" @click="setRating(n, 'Streetwise')"><i class="bi bi-circle-fill p-1"></i></span>
								<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Streetwise')">Reset</button>
							</div>
						</div>

						<div class="row mb-3">
							<div class="col-4"><label class="form-label">Subterfuge</label></div>
							<div class="col-8">
								<span v-for="n in 5" :class="['dot', n <= Subterfuge ? 'filled' : '']" @click="setRating(n, 'Subterfuge')"><i class="bi bi-circle-fill p-1"></i></span>
								<button type="button" class="btn btn-secondary btn-sm" @click="resetRating('Subterfuge')">Reset</button>
							</div>
						</div>
					</div>
					<div class="col-4"></div>
					<div class="col-4"></div>
				</div>
			</div>
		</div>
		<div id="jsonTemp"></div>
		<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
		<script src="https://unpkg.com/vue-router@4"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/table-to-json@1.0.0/lib/jquery.tabletojson.min.js" integrity="sha256-H8xrCe0tZFi/C2CgxkmiGksqVaxhW0PFcUKZJZo1yNU=" crossorigin="anonymous"></script>
		<!-- Linked to CDN (content delivery network) for easy distribution. You can download these libraries to your own computer and link to them -->
		<script>
			function getPageData(search, self) {
				$.getJSON("https://codexofdarkness.com/mediawiki/api.php?action=parse&format=json&prop=text&origin=*&page=" + search, function(data) {
					var markup = data.parse.text["*"]; 								//Parse API call
					markup = markup.substring(0, markup.indexOf('Notation Legend'))	//Clean data by removing other table
					$('#jsonTemp').html(markup); 									//Temporarily append API data to html
					self.meritsJSON = $('table').tableToJSON(); 					//Use tableToJSON(); plugin 
					$('#jsonTemp').html(''); 										//Remove the API data from page

					//console.log(self.merits);
					//alert(JSON.stringify(self.merits));
				});
			}
			const app = Vue.createApp({
				data: function() {
					return {
						Name: "",
						Virtue: "",
						Chronicle: "",
						Age: 18,
						Vice: "",
						Faction: "",
						Player: "",
						Concept: "",
						Group: "",
						Size: 5,
						Morality: 7,
						Intelligence: 1,
						Wits: 1,
						Resolve: 1,
						Strength: 1,
						Dexterity: 1,
						Stamina: 1,
						Presence: 1,
						Manipulation: 1,
						Composure: 1,
						Academics: -3,
						Computer: -3,
						Crafts: -3,
						Investigation: -3,
						Medicine: -3,
						Occult: -3,
						Politics: -3,
						Science: -3,
						MentalSpecialties: [],
						Athletics: -1,
						Brawl: -1,
						Drive: -1,
						Firearms: -1,
						Larceny: -1,
						Stealth: -1,
						Survival: -1,
						Weaponry: -1,
						PhysicalSpecialties: [],
						AnimalKen: -1,
						Empathy: -1,
						Expression: -1,
						Intimidation: -1,
						Persuasion: -1,
						Socialize: -1,
						Streetwise: -1,
						Subterfuge: -1,
						SocialSpecialties: [],
						Merits: [],
						HealthStatus: [0,0,0,0,0,0,0,0,0,0,0,0],
						WillpowerStatus: [false,false,false,false,false,false,false,false,false,false,false,false],
					}
				},
				computed: {
    				mappedStates() {
						return this.HealthStatus.map((state) => {
							if (state === 0) {
							return "bi bi-square p-1";
							} else if (state === 1) {
							return "bi bi-slash-square p-1";
							} else if (state === 2) {
							return "bi bi-x-square p-1";
							} else {
							return "bi bi-exclamation-square p-1";
							}
						});
					}
    			},
				methods: {
					setRating: function(n, variable) {
						this[variable] = n;
						console.log(variable, this[variable]);
					},

					resetRating: function(variable){
						switch(variable) {
						case 'Academics':
						case 'Computer':
						case 'Crafts':
						case 'Investigation':
						case 'Medicine':
						case 'Occult':
						case 'Politics':
						case 'Science':
							this.setRating(-3,variable);
							break;
						default:
							this.setRating(-1,variable);
							break;
						} 
					},
					cycleState: function(index) {
						if (this.HealthStatus[index] === 0) {
							this.HealthStatus[index] = 1;
						} else if (this.HealthStatus[index] === 1) {
							this.HealthStatus[index] = 2;
						} else if (this.HealthStatus[index] === 2) {
							this.HealthStatus[index] = 3;
						} else {
							this.HealthStatus[index] = 0;
						}
					}
				}
			})
			app.component('app-meritdropdown', {
				data: function() {
					return {
						merits: [],
						meritsJSON: [],
						isPopupVisible: false,
					}
				},
				template: `
                <div class="row mb-3">
					<div class="dropdown">
						<button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false"> Select Merit </button>
						<ul class="dropdown-menu scrollable-menu" aria-labelledby="dropdownMenuButton">
							<li v-for="merit in meritsJSON">
								<a class="dropdown-item" href="#" @click.prevent="addMerit(merit)">{{ merit.Rating }} - {{ merit.Merit }}</a>
							</li>
						</ul>
					</div>
				</div>
				<div class="row mb-3" v-for="listMerit in merits">
					<div class="col-4">{{listMerit.Merit}}</div>
					<div class="col-6">
						<span v-if="listMerit.Rating.toLowerCase().indexOf('o') === -1 " v-for="n in 5" :class="['dot', n <= listMerit.Value ? 'filled' : '']">
							<i class="bi bi-circle-fill p-1"></i>
						</span>
						<span v-else-if="listMerit.Rating.toLowerCase().indexOf(' to ') != -1 " v-for="n in 5" :class="['dot', n <= listMerit.Value ? 'filled' : '']" @click="rangedMerit(n, listMerit)">
							<i class="bi bi-circle-fill p-1"></i>
						</span>
						<span v-else-if="listMerit.Rating.toLowerCase().indexOf(' or ') != -1 " v-for="n in 5" :class="['dot', n <= listMerit.Value ? 'filled' : '']" @click="uniqueMerit(n, listMerit)">
							<i class="bi bi-circle-fill p-1"></i>
						</span>
					</div>
					<div class="col-2">Info</div>
				</div>
				`,
				methods: {
					addMerit: function(merit) {
                        event.preventDefault();
						if(merit.Rating.toLowerCase().indexOf('o') === -1){
							merit.Value = merit.Rating.length;
							console.log(merit.Value);
						}
						else if(merit.Rating.toLowerCase().indexOf(' to ') != -1 ){
							this.rangedMerit(0, merit);
						}
						else{
							this.uniqueMerit(0, merit);
						}
					    this.merits.push(merit);
					    console.log(this.merits);
					},
                    rangedMerit: function(n, merit){
                        if(n >= merit.Rating.split(' to ')[1].length){
                            merit.Value = merit.Rating.split(' to ')[1].length;
                        }
                        else if(n<= merit.Rating.split(' to ')[0].length){
                            merit.Value = merit.Rating.split(' to ')[0].length
                        }
                        else{
                            merit.Value = n;
                        }
                        console.log(merit.Value);
                    },
					uniqueMerit: function(n, merit){
						var levels = merit.Rating.split(/(?:,\s|\sor\s)/);
						if(n == 0){
							merit.Value = levels[0].length;
						}

						levels.forEach(function(item){
							if(item.length === n){
								merit.Value = n;
							}
						})
						console.log(merit.Value);
                    },
					showPopup: function(levels) {
						popupMessage = "This merit can only be the following: "
						levels.forEach(function(item){
							popupMessage += item + ", ";
						})
						this.isPopupVisible = true;
						setTimeout(() => {
							this.isPopupVisible = false;
						}, 3000);
    				},
				},
				mounted() {
					var self = this;
					getPageData("Merits,_Universal_(1st_Edition)", self);
				},
			})
			app.mount('#app')
		</script>
	</body>
</html>
